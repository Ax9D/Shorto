(function(a){function e(e){for(var t,o,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(t in c)Object.prototype.hasOwnProperty.call(c,t)&&(a[t]=c[t]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var a,e=0;e<r.length;e++){for(var n=r[e],t=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(t=!1)}t&&(r.splice(e--,1),a=o(o.s=n[0]))}return a}var t={},i={app:0},r=[];function o(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return a[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=a,o.c=t,o.d=function(a,e,n){o.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:n})},o.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,e){if(1&e&&(a=o(a)),8&e)return a;if(4&e&&"object"===typeof a&&a&&a.__esModule)return a;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var t in a)o.d(n,t,function(e){return a[e]}.bind(null,t));return n},o.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return o.d(e,"a",e),e},o.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},o.p="/short/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(a,e,n){a.exports=n("56d7")},"034f":function(a,e,n){"use strict";n("85ec")},"081f":function(a,e,n){"use strict";n("26e9")},"1f80":function(a,e){a.exports={INVALID_URL:{code:111,message:"Invalid URL"},INVALID_ANALYTICS_ID:{code:123,message:"Invalid analytics ID"},UNKNOWN_SHORT_ID:{code:234,message:"Unknown shortID"},NO_ANALYTICS_ID:{code:999,message:"No analytics ID provided"},CONNECTION_TIMED_OUT:{code:69420,message:"Connection timed out"}}},"26e9":function(a,e,n){},"3c69":function(a,e,n){},"56d7":function(a,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var t,i,r,o=n("2b0e"),s=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},c=[],l=(n("034f"),n("2877")),u={},d=Object(l["a"])(u,s,c,!1,null,null,null),p=d.exports,h=n("8c4f"),f=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:a.url,expression:"url"}],class:{valid:a.validURL},attrs:{id:"url",spellcheck:"false",disabled:a.generating},domProps:{value:a.url},on:{keyup:a.updateValidity,click:a.updateValidity,input:function(e){e.target.composing||(a.url=e.target.value)}}}),n("button",{directives:[{name:"show",rawName:"v-show",value:a.validURL&&""!=a.url,expression:"validURL && url != ''"}],attrs:{id:"generateBtn",type:"submit"},on:{click:a.generate}},[a._v(" Generate ")]),a.generating||a.urlData?n("div",{staticClass:"holder",attrs:{id:"status"}},[a.urlData?n("div",[n("p",{attrs:{id:"message"}},[a._v(a._s(a.urlData.shortID))]),n("ul",{staticClass:"stuff"},[n("li",[n("button",{staticClass:"small copy",attrs:{id:"copy"},on:{click:a.copyToClipboard}})]),n("li",[n("button",{staticClass:"small analytics",attrs:{id:"analytics"},on:{click:a.openAnalytics}})])])]):n("div",{staticClass:"loading"},[a._m(0)])]):a._e()])},m=[function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"spinner"},[n("div",{staticClass:"bounce1"}),n("div",{staticClass:"bounce2"}),n("div",{staticClass:"bounce3"})])}],g=(n("99af"),n("d3b7"),n("1f80")),v=n("9552"),b="https://".concat("apux.herokuapp.com").concat("/generate/"),S={name:"App",data:function(){return{message:"",validURL:!1,url:"",urlData:null,generating:!1}},methods:{updateValidity:function(){return this.urlData&&(this.urlData=null),this.validURL=v.validUrl(this.url)},generate:function(){var a=this;console.log(Object({VUE_APP_ROOT_API:"apux.herokuapp.com",VUE_APP_GENERATE_ENDPOINT:"/generate/",VUE_APP_REDIRECT_ENDPOINT:"/",VUE_APP_ANALYTICS_ENDPOINT:"/analytics",NODE_ENV:"production",BASE_URL:"/short/"})),this.generating=!0,fetch(b,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:this.url})}).then((function(e){if(a.generating=!1,200==e.status)return e.json();throw new Error("Couldn't reach server")})).then((function(e){if(console.log(e),"error"in e)switch(e.error.code){case g.INVALID_URL.code:a.validURL=!1,a.message=e.error.message;break}else a.urlData=e,a.validURL=!1})).catch((function(a){console.log(a)})),this.url=""},copyToClipboard:function(){var a=document.createRange();a.selectNode(document.getElementById("message")),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),window.getSelection().removeAllRanges()},openAnalytics:function(){this.$router.push("analytics/".concat(this.urlData.analyticsID))}}},C=S,I=(n("6c70"),Object(l["a"])(C,f,m,!1,null,null,null)),y=I.exports,M=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{attrs:{id:"analytics"}},[n("p",[a._v("Anyone with this link can view this information")]),n("p",[a._v("Updated Live ðŸ”´")]),n("div",{directives:[{name:"show",rawName:"v-show",value:a.connected,expression:"connected"}],attrs:{id:"dataBlock"}},[n("div",{staticClass:"holder",attrs:{id:"clicks"}},[n("p",{staticStyle:{position:"absolute",top:"-5%",left:"50%",transform:"translateX(-50%)","font-weight":"bold"}},[a._v(" Clicks ")]),n("p",{attrs:{id:"clicks"}},[a._v(a._s(a.clicks))])]),n("div",{staticClass:"holder",attrs:{id:"map"}},[n("div",{ref:"regions_div",attrs:{id:"regions_div"}}),n("div",{attrs:{id:"extraInfo"}},[n("transition-group",{attrs:{name:"countriesList",tag:"ol"}},a._l(a.countries,(function(e){return n("li",{key:e[0]},[a._v(" "+a._s(e[0])+" - "+a._s(e[1])+"% ")])})),0)],1)])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!a.connected,expression:"!connected"}],staticClass:"loading"},[a._m(0)])])},T=[function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"spinner"},[n("div",{staticClass:"bounce1"}),n("div",{staticClass:"bounce2"}),n("div",{staticClass:"bounce3"})])}],A=(n("4160"),n("13d5"),n("4fad"),n("9911"),n("159b"),n("b85c")),N=(n("96cf"),n("1da1")),w=n("a5d4"),D=n("a5e5"),_=n("1f80"),E={backgroundColor:{fill:"#191a1a",stroke:"white",strokeWidth:"2px"},datalessRegionColor:"#343332",colorAxis:{colors:["#1f8ef0","#274db8","#123cb3"]},legend:"none",enableRegionInteractivity:!1},R="wss://".concat("apux.herokuapp.com").concat("/analytics"),k={};function L(){i.draw(r,E)}var P={data:function(){return{shortID:null,link:null,analyticsID:null,connected:!1,clicks:121320013992,mapData:{},chart:null,countries:{}}},methods:{connect:function(){var a=this;return new Promise((function(e,n){var t=new WebSocket(R);console.log(R),t.addEventListener("open",(function(){t.send(JSON.stringify({analyticsID:a.analyticsID}))}));var i=setTimeout((function(){t.close(),n(_.CONNECTION_TIMED_OUT)}),5e3),r=function a(r){var o=JSON.parse(r.data);console.log(o),clearTimeout(i),t.removeEventListener("message",a),"error"in o?n(o.error):e({socket:t,data:o})};t.addEventListener("message",r)}))},setup:function(){var a=Object(N["a"])(regeneratorRuntime.mark((function a(e,n,t){var i,r,o,s=this;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,this.connect();case 3:i=a.sent,r=i.socket,o=i.data,e(o),console.log(r),r.addEventListener("message",(function(a){var i=JSON.parse(a.data);"error"in i?(console.log(i.error),t(),console.log("Trying to reconnect in 5 s"),setTimeout((function(){s.setup(e,n,t)}),5e3)):n(i)})),r.addEventListener("close",(function(){t(),console.log("Trying to reconnect in 5 s"),setTimeout((function(){s.setup(e,n,t)}),5e3)})),a.next=23;break;case 12:a.prev=12,a.t0=a["catch"](0),a.t1=a.t0.code,a.next=a.t1===_.CONNECTION_TIMED_OUT.code?17:a.t1===_.INVALID_ANALYTICS_ID.code?21:23;break;case 17:return t(),console.log("Trying to reconnect in 5 s"),setTimeout((function(){s.setup(e,n,t)}),5e3),a.abrupt("break",23);case 21:return console.log(_.message),a.abrupt("break",23);case 23:case"end":return a.stop()}}),a,this,[[0,12]])})));function e(e,n,t){return a.apply(this,arguments)}return e}(),updateCountries:function(a){console.log(r);var e,n=Object(A["a"])(a);try{for(n.s();!(e=n.n()).done;){var t=e.value,i=t[0],o=t[1],s=D[i];if(s in k)r.setCell(k[s],1,o);else{var c=r.addRow([i,o]);k[s]=c}this.mapData[s]=o}}catch(u){n.e(u)}finally{n.f()}this.countries=Object.entries(this.mapData),this.countries.sort((function(a,e){return e[1]-a[1]}));var l=this.countries.reduce((function(a,e){return console.log(e[1]),a+e[1]}),0);this.countries.forEach((function(a){return a[1]=Math.round(a[1]/l*1e3)/10,a})),L(),this.countries.push()}},mounted:function(){var a=Object(N["a"])(regeneratorRuntime.mark((function a(){var e=this;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,w.load("https://www.gstatic.com/charts/loader.js");case 2:t=window.google,this.analyticsID=this.$route.params.analyticsID,console.log(this.analyticsID),t.charts.load("current",{packages:["geochart"],mapsApiKey:"AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY"}),t.charts.setOnLoadCallback((function(){r=new t.visualization.DataTable,r.addColumn("string","Country"),r.addColumn("number","Clicks"),i=new t.visualization.GeoChart(e.$refs["regions_div"]),L(),e.setup((function(a){e.connected=!0,e.clicks=a.analytics.clicks,e.shortID=a.shortID,e.link=a.link,e.updateCountries(Object.entries(a.analytics.regionData))}),(function(a){console.log(a.clicks),e.clicks=a.clicks,e.updateCountries(a.regionData)}),(function(){e.connected=!1}))}));case 7:case"end":return a.stop()}}),a,this)})));function e(){return a.apply(this,arguments)}return e}()},O=P,G=(n("93da"),Object(l["a"])(O,M,T,!1,null,"25ad0c54",null)),B=G.exports,U=function(){var a=this,e=a.$createElement,n=a._self._c||e;return a.error?n("p",{attrs:{id:"error"}},[a._v(a._s(a.error.message))]):a._e()},x=[],K="https://".concat("apux.herokuapp.com").concat("/"),V={data:function(){return{error:null}},mounted:function(){var a=this,e=this.$route.params.shortID;fetch("".concat(K).concat(e)).then((function(a){if(200==a.status)return a.json();throw new Error("Couldn't reach server")})).then((function(e){console.log(e),"error"in e?a.error=e.error:location.href=e.link})).catch((function(a){console.log(a)}))}},F=V,j=(n("081f"),Object(l["a"])(F,U,x,!1,null,"69bbba64",null)),H=j.exports;o["a"].use(h["a"]);var J=[{path:"/",name:"Generator",component:y},{path:"/analytics/:analyticsID",name:"About",component:B},{path:"/:shortID",name:"Redirect",component:H}],z=new h["a"]({mode:"history",base:"/short/",routes:J}),W=z;o["a"].config.productionTip=!1,new o["a"]({router:W,render:function(a){return a(p)}}).$mount("#app")},"6c70":function(a,e,n){"use strict";n("3c69")},"85ec":function(a,e,n){},"93da":function(a,e,n){"use strict";n("e8a1")},9552:function(a,e){var n=/^[(http(s)?)://(www\.)?a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/;a.exports={validUrl:function(a){return n.test(a)}}},a5d4:function(a,e,n){n("d3b7"),a.exports={load:function(a){return new Promise((function(e){var n=document.createElement("script");n.setAttribute("src",a),n.onload=function(){return e()},document.head.appendChild(n),console.log("Loaded ".concat(a))}))}}},a5e5:function(a,e){a.exports={AF:"Afghanistan",AX:"Ã…land Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, the Democratic Republic of the",CK:"Cook Islands",CR:"Costa Rica",CI:"CÃ´te d'Ivoire",HR:"Croatia",CU:"Cuba",CW:"CuraÃ§ao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic of",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia, the Former Yugoslav Republic of",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"RÃ©union",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint BarthÃ©lemy",SH:"Saint Helena, Ascension and Tristan da Cunha",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin (French part)",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch part)",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan, Province of China",TJ:"Tajikistan",TZ:"Tanzania, United Republic of",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela, Bolivarian Republic of",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"}},e8a1:function(a,e,n){}});
//# sourceMappingURL=app.907c819c.js.map