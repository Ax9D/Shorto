(function(a){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(a[n]=c[n]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),t()}function t(){for(var a,e=0;e<i.length;e++){for(var t=i[e],n=!0,s=1;s<t.length;s++){var c=t[s];0!==r[c]&&(n=!1)}n&&(i.splice(e--,1),a=o(o.s=t[0]))}return a}var n={},r={app:0},i=[];function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=a,o.c=n,o.d=function(a,e,t){o.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:t})},o.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,e){if(1&e&&(a=o(a)),8&e)return a;if(4&e&&"object"===typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var n in a)o.d(t,n,function(e){return a[e]}.bind(null,n));return t},o.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return o.d(e,"a",e),e},o.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},o.p="/short/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),t()})({0:function(a,e,t){a.exports=t("56d7")},"034f":function(a,e,t){"use strict";t("85ec")},"081f":function(a,e,t){"use strict";t("26e9")},"1f80":function(a,e){a.exports={INVALID_URL:{code:111,message:"Invalid URL"},INVALID_ANALYTICS_ID:{code:123,message:"Invalid analytics ID"},UNKNOWN_SHORT_ID:{code:234,message:"Unknown shortID"},NO_ANALYTICS_ID:{code:999,message:"No analytics ID provided"},CONNECTION_TIMED_OUT:{code:69420,message:"Connection timed out"}}},"26e9":function(a,e,t){},"3c69":function(a,e,t){},"56d7":function(a,e,t){"use strict";t.r(e);t("e260"),t("e6cf"),t("cca6"),t("a79d");var n,r,i,o=t("2b0e"),s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},c=[],l=(t("034f"),t("2877")),u={},d=Object(l["a"])(u,s,c,!1,null,null,null),p=d.exports,h=t("8c4f"),f=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.url,expression:"url"}],class:{valid:a.validURL},attrs:{id:"url",spellcheck:"false",disabled:a.generating},domProps:{value:a.url},on:{keyup:a.updateValidity,click:a.updateValidity,input:function(e){e.target.composing||(a.url=e.target.value)}}}),t("button",{directives:[{name:"show",rawName:"v-show",value:a.validURL&&""!=a.url,expression:"validURL && url != ''"}],attrs:{id:"generateBtn",type:"submit"},on:{click:a.generate}},[a._v(" Generate ")]),a.generating||a.urlData?t("div",{staticClass:"holder",attrs:{id:"status"}},[a.urlData?t("div",[a.urlData.error?a._e():t("p",{attrs:{id:"message"}},[t("a",{attrs:{href:"http://"+a.urlData.link}},[a._v(a._s(a.urlData.link))])]),a.urlData.error?t("p",{attrs:{id:"error"}},[a._v(" "+a._s(a.urlData.error.message)+" ")]):t("ul",{staticClass:"stuff"},[t("li",[t("button",{staticClass:"small copy",attrs:{id:"copy"},on:{click:a.copyToClipboard}})]),t("li",[t("button",{staticClass:"small analytics",attrs:{id:"analytics"},on:{click:a.openAnalytics}})])])]):t("div",{staticClass:"loading"},[a._m(0)])]):a._e()])},m=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"spinner"},[t("div",{staticClass:"bounce1"}),t("div",{staticClass:"bounce2"}),t("div",{staticClass:"bounce3"})])}],v=(t("99af"),t("d3b7"),t("9911"),t("96cf"),t("1da1")),g=t("9552"),b="https://".concat("apux.herokuapp.com").concat("/generate/"),C={name:"App",data:function(){return{validURL:!1,url:"",urlData:null,generating:!1}},methods:{updateValidity:function(){return this.urlData&&(this.urlData=null),this.validURL=g.validUrl(this.url)},generate:function(){var a=Object(v["a"])(regeneratorRuntime.mark((function a(){var e,t,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return this.generating=!0,e=this.url,this.url="",this.validURL=!1,a.next=6,this.$recaptcha("generate");case 6:return t=a.sent,a.prev=7,a.next=10,fetch(b,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,recaptchaToken:t})});case 10:if(n=a.sent,this.generating=!1,200!=n.status){a.next=21;break}return a.next=15,n.json();case 15:r=a.sent,console.log(r),this.urlData=r,"error"in r||(this.urlData.link="ax9d.github.io/short/".concat(this.urlData.shortID)),a.next=22;break;case 21:throw new Error("Couldn't reach server");case 22:a.next=27;break;case 24:a.prev=24,a.t0=a["catch"](7),console.log(a.t0);case 27:case"end":return a.stop()}}),a,this,[[7,24]])})));function e(){return a.apply(this,arguments)}return e}(),copyToClipboard:function(){var a=document.createRange();a.selectNode(document.getElementById("message")),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),window.getSelection().removeAllRanges()},openAnalytics:function(){this.$router.push("analytics/".concat(this.urlData.analyticsID))}}},S=C,y=(t("6c70"),Object(l["a"])(S,f,m,!1,null,null,null)),I=y.exports,M=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{attrs:{id:"analytics"}},[t("p",[a._v("Anyone with this link can view this information")]),t("p",[a._v("Updated Live ðŸ”´")]),t("div",{directives:[{name:"show",rawName:"v-show",value:a.connected,expression:"connected"}],attrs:{id:"dataBlock"}},[t("div",{staticClass:"holder",attrs:{id:"clicks"}},[t("p",{staticStyle:{position:"absolute",top:"-5%",left:"50%",transform:"translateX(-50%)","font-weight":"bold"}},[a._v(" Clicks ")]),t("p",{attrs:{id:"clicks"}},[a._v(a._s(a.clicks))])]),t("div",{staticClass:"holder",attrs:{id:"map"}},[t("div",{ref:"regions_div",attrs:{id:"regions_div"}}),t("div",{attrs:{id:"extraInfo"}},[t("transition-group",{attrs:{name:"countriesList",tag:"ol"}},a._l(a.countries,(function(e){return t("li",{key:e[0]},[a._v(" "+a._s(e[0])+" - "+a._s(e[1])+"% ")])})),0)],1)])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!a.connected,expression:"!connected"}],staticClass:"loading"},[a._m(0)])])},w=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"spinner"},[t("div",{staticClass:"bounce1"}),t("div",{staticClass:"bounce2"}),t("div",{staticClass:"bounce3"})])}],A=(t("4160"),t("13d5"),t("4fad"),t("159b"),t("b85c")),T=t("a5d4"),k=t("a5e5"),D=t("1f80"),N={backgroundColor:{fill:"#191a1a",stroke:"white",strokeWidth:"2px"},datalessRegionColor:"#343332",colorAxis:{colors:["#1f8ef0","#274db8","#123cb3"]},legend:"none",enableRegionInteractivity:!1},R="wss://".concat("apux.herokuapp.com").concat("/analytics"),_={};function L(){r.draw(i,N)}var G={data:function(){return{shortID:null,link:null,analyticsID:null,connected:!1,clicks:121320013992,mapData:{},chart:null,countries:{}}},methods:{connect:function(){var a=this;return new Promise((function(e,t){var n=new WebSocket(R);console.log(R),n.addEventListener("open",(function(){n.send(JSON.stringify({analyticsID:a.analyticsID}))}));var r=setTimeout((function(){n.close(),t(D.CONNECTION_TIMED_OUT)}),5e3),i=function a(i){var o=JSON.parse(i.data);console.log(o),clearTimeout(r),n.removeEventListener("message",a),"error"in o?t(o.error):e({socket:n,data:o})};n.addEventListener("message",i)}))},setup:function(){var a=Object(v["a"])(regeneratorRuntime.mark((function a(e,t,n){var r,i,o,s=this;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,this.connect();case 3:r=a.sent,i=r.socket,o=r.data,e(o),console.log(i),i.addEventListener("message",(function(a){var r=JSON.parse(a.data);"error"in r?(console.log(r.error),n(),console.log("Trying to reconnect in 5 s"),setTimeout((function(){s.setup(e,t,n)}),5e3)):t(r)})),i.addEventListener("close",(function(){n(),console.log("Trying to reconnect in 5 s"),setTimeout((function(){s.setup(e,t,n)}),5e3)})),a.next=23;break;case 12:a.prev=12,a.t0=a["catch"](0),a.t1=a.t0.code,a.next=a.t1===D.CONNECTION_TIMED_OUT.code?17:a.t1===D.INVALID_ANALYTICS_ID.code?21:23;break;case 17:return n(),console.log("Trying to reconnect in 5 s"),setTimeout((function(){s.setup(e,t,n)}),5e3),a.abrupt("break",23);case 21:return console.log(D.message),a.abrupt("break",23);case 23:case"end":return a.stop()}}),a,this,[[0,12]])})));function e(e,t,n){return a.apply(this,arguments)}return e}(),updateCountries:function(a){console.log(i);var e,t=Object(A["a"])(a);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n[0],o=n[1],s=k[r];if(s in _)i.setCell(_[s],1,o);else{var c=i.addRow([r,o]);_[s]=c}this.mapData[s]=o}}catch(u){t.e(u)}finally{t.f()}this.countries=Object.entries(this.mapData),this.countries.sort((function(a,e){return e[1]-a[1]}));var l=this.countries.reduce((function(a,e){return console.log(e[1]),a+e[1]}),0);this.countries.forEach((function(a){return a[1]=Math.round(a[1]/l*1e3)/10,a})),L(),this.countries.push()}},mounted:function(){var a=Object(v["a"])(regeneratorRuntime.mark((function a(){var e=this;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,T.load("https://www.gstatic.com/charts/loader.js");case 2:n=window.google,this.analyticsID=this.$route.params.analyticsID,console.log(this.analyticsID),n.charts.load("current",{packages:["geochart"],mapsApiKey:"AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY"}),n.charts.setOnLoadCallback((function(){i=new n.visualization.DataTable,i.addColumn("string","Country"),i.addColumn("number","Clicks"),r=new n.visualization.GeoChart(e.$refs["regions_div"]),L(),e.setup((function(a){e.connected=!0,e.clicks=a.analytics.clicks,e.shortID=a.shortID,e.link=a.link,e.updateCountries(Object.entries(a.analytics.regionData))}),(function(a){console.log(a.clicks),e.clicks=a.clicks,e.updateCountries(a.regionData)}),(function(){e.connected=!1}))}));case 7:case"end":return a.stop()}}),a,this)})));function e(){return a.apply(this,arguments)}return e}()},B=G,O=(t("93da"),Object(l["a"])(B,M,w,!1,null,"25ad0c54",null)),E=O.exports,P=function(){var a=this,e=a.$createElement,t=a._self._c||e;return a.error?t("p",{attrs:{id:"error"}},[a._v(a._s(a.error.message))]):a._e()},x=[],U="https://".concat("apux.herokuapp.com").concat("/"),K={data:function(){return{error:null}},mounted:function(){var a=this,e=this.$route.params.shortID;fetch("".concat(U).concat(e)).then((function(a){if(200==a.status)return a.json();throw new Error("Couldn't reach server")})).then((function(e){console.log(e),"error"in e?a.error=e.error:location.href=e.link})).catch((function(a){console.log(a)}))}},F=K,j=(t("081f"),Object(l["a"])(F,P,x,!1,null,"69bbba64",null)),V=j.exports;o["a"].use(h["a"]);var H=[{path:"/",name:"Generator",component:I},{path:"/analytics/:analyticsID",name:"About",component:E},{path:"/:shortID",name:"Redirect",component:V}],z=new h["a"]({mode:"history",base:"/short/",routes:H}),Z=z,J=t("760d");o["a"].config.productionTip=!1,o["a"].use(J["VueReCaptcha"],{siteKey:"6LekzN8ZAAAAAMze_DCGKta65Iv3fNnZCA86L9C4",loaderOptions:{useRecaptchaNet:!0}}),new o["a"]({router:Z,render:function(a){return a(p)}}).$mount("#app")},"6c70":function(a,e,t){"use strict";t("3c69")},"85ec":function(a,e,t){},"93da":function(a,e,t){"use strict";t("e8a1")},9552:function(a,e){var t=/^[(http(s)?)://(www\.)?a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/;a.exports={validUrl:function(a){return t.test(a)}}},a5d4:function(a,e,t){t("d3b7"),a.exports={load:function(a){return new Promise((function(e){var t=document.createElement("script");t.setAttribute("src",a),t.onload=function(){return e()},document.head.appendChild(t),console.log("Loaded ".concat(a))}))}}},a5e5:function(a,e){a.exports={AF:"Afghanistan",AX:"Ã…land Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, the Democratic Republic of the",CK:"Cook Islands",CR:"Costa Rica",CI:"CÃ´te d'Ivoire",HR:"Croatia",CU:"Cuba",CW:"CuraÃ§ao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic of",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia, the Former Yugoslav Republic of",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"RÃ©union",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint BarthÃ©lemy",SH:"Saint Helena, Ascension and Tristan da Cunha",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin (French part)",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch part)",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan, Province of China",TJ:"Tajikistan",TZ:"Tanzania, United Republic of",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela, Bolivarian Republic of",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"}},e8a1:function(a,e,t){}});
//# sourceMappingURL=app.68ad58f7.js.map